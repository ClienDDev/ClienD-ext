<?xml version="1.0" encoding="UTF-8"?>
<project name="Cliend extension" basedir = "./" default="init" description="Building project">
	<!--Директория для собранного проекта-->
	<property override="false" name="project_dir" value="${build_dir}"/>
	
	<!--Подключение инструментов PHING-->	
	<taskdef name="lessc" classname="phing.rych.tasks.LessCompilerTask" /> <!--LESSC-->
	<taskdef name="minify" classname="phing.my.kpMinTask" /> <!--YUI compressor-->
	<property override="false" name="yui_path" value="${phing.home}\..\yuicompressor.jar"/>
	<property override="false" name="phpdoc_path" value="${phing.home}\..\phpdoc2\bin\phpdoc.bat"/>
	
	
	<!--JS файлы, которые надо сжать-->
    <fileset dir="${project_dir}/" id="fileset.js">
        <include name="bg.js" />
		<include name="sites.js" />
    </fileset>
	
	
	<target name="init" depends="minifycss, minifyjs">
		<echo>Completed</echo>
	</target>
	
	
	<target name="lessc">
		<echo msg="LESS compilation" />
		<lessc targetdir="${project_dir}/styles">
			<fileset dir="${project_dir}/styles">
				<include name="*.less" />
			</fileset>
		</lessc>
	</target>
	
	<target name="minifyjs">
		<echo msg="Minifying JavaScript files..." />
		<minify targetDir="${project_dir}/js/" yuiPath="${yui_path}" type="js">
			<fileset dir="${project_dir}/js/">
				<include name="*.js"/>
			</fileset>
		</minify>
    </target>
	
    <target name="minifycss" depends="lessc">
        <echo msg="Minifying CSS files..." />
        <minify targetDir="${project_dir}/styles" yuiPath="${yui_path}" type="css">
			<fileset dir="${project_dir}/styles">
				<include name="*.css"/>
			</fileset>
		</minify>
    </target>
</project>
